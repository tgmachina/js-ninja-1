<html>
	<head>
		<title>Test Suite</title>
		<script type="text/javascript" src="log.js"></script>
		<script type="text/javascript">

			(function(){
			 	var results;
				//A thought to ponder, what is "this" in this function context?
				this.assert = function(value, desc){
					var li = document.createElement("li");
					li.className = value ? "pass" : "fail";
					li.appendChild(document.createTextNode(desc));
					results.appendChild(li);
					if(!value){
						//Any single failure will fail the overall test suite
						li.parentNode.parentNode.className = "fail";
					}
					return li;
				};

				this.test = function(name, fn){
					results = document.getElementById("results");
					//Here we create a parent assertion that represents the test
					//group. At this point the results variable is now occupied
					//by the sub ul DOM element and all assertions in the test will
					//be appended there
					results = assert(true, name).appendChild(
						document.createElement("ul")
					);
					fn();
				};
			})();

			window.onload = function(){
				test("A test.", function(){
					assert(true, "First assertion completed!");
					assert(true, "Second assertion completed!");
					assert(true, "Third assertion completed!");
				});

				test("Another test.", function(){
					assert(true, "First assertion completed!");
					assert(false, "Second assertion failed! Now the suite fails!");
					assert(true, "Third assertion completed!");
				});
				
				test("A third test.", function(){
					//Testing JS "truthiness"
					assert(null, "Fail");
					assert(5, "Pass!");
				});
			};

		</script>

		<style>
			#results li.pass{
				color: green;
			}

			#results li.fail{
				color: red;
			}
		</style>

	</head>

	<body>
		<ul id="results"></ul>
	</body>
</html>
